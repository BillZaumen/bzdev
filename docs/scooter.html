<!DOCTYPE HTML>
<HTML lang="en">
  <HEAD>
    <STYLE TYPE="text/css">
      H1 {
	  font-weight: bold;
	  font-size: 18pt;
	  font-family: helvetica, sans-serif;
	  font-variant: normal;
	  font-style: normal;
      }
      H2 {
	  font-weight: bold;
	  font-size: 16pt;
	  font-family: helvetica, sans-serif;
	  font-variant: normal;
	  font-style: normal;
      }
      DIV.bodybg {background-color: rgb(10,10,25);}
      A {color: rgb(65,225,128);}
      A:link {color: rgb(65,225,128);}
      A:visited {color: rgb(65,164,128);}
      BLOCKQUOTE {background-color: rgb(50,50,50);}
      CODE {
	  font-weight: normal;
	  font-size: 14pt;
	  font-family: courier, monospace
      }
      BODY {
	  font-weight: normal;
	  font-size: 14pt;
	  font-family: times, serif;
	  font-variant: normal;
	  font-style: normal;
	  background-color: rgb(10,10,25);
	  color: rgb(255,255,255);
	  margin: 2em;
      }
    </STYLE>
    <script>
      MathJax = {
	  tex: {
	      inlineMath: [['$', '$'], ['\\(', '\\)']],
	      displayMath: [['$$', '$$'], ['\\[', '\\]']]}
      };
    </script>
    <script ID="MathJax-script" async
	    SRC="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
    </script>
    <TITLE>Estimating the range of an electric scooter</TITLE>
    <META NAME="author" content="Bill Zaumen">
    <META NAME="description" content="Range of an electric scooter">
  </HEAD>
  <BODY>
    <H1 style="text-align:center">Estimating the range of an electric scooter</H1>
    <P>
      The range given in an electric scooter's specifications,
      typically stated as the maximum range, is frequently higher than
      what one finds in practice: the actual range is dependent on a
      number of factors including the scooter's speed the mass of the
      scooter and rider, the road surface, the number of stops along a
      route, the air temperature, and whether or not the route is
      flat.  It is consequently useful to be able to make a rough
      estimate of a scooter's range for the conditions under which it
      will be used, if only to avoid having to walk home due to being
      overoptimistic. The following text describes a couple of methods
      for estimating the range of an electric scooter, when ridden on
      flat ground, using a simple model for a scooter's energy
      consumption.
    <P>
      The total energy available for propelling a scooter is the
      energy capacity of the battery $E_b$ multiplied by the
      efficiency $f$ of the motor and electrical system.  Friction
      will result in a retarding force $F$. After traveling a distance
      $L$, the energy lost to friction is $FL$, and this must be equal
      to $E_bf$ when $L$ is the range of the scooter, in which case
      $$L = \frac{E_bf}{F}$$
    <P>
      To estimate $F$, under the assumption that $F$ is not
      significantly velocity dependent, ride the scooter at a speed
      $v$ on level ground. The initial kinetic energy is then
      $\frac{1}{2}mv^2$, where $m$ is the mass of the scooter and
      rider combined.  At some designated point, turn off the power
      (e.g., let go of the throttle or disable cruise control), and
      measure the stopping distance $d$.  The energy dissipated as the
      scooter stops is $Fd$, its initial kinetic energy is $mv^2/2$,
      so conservation of energy implies that $Fd = \frac{1}{2}mv^2$,
      and consequently $$ F = \frac{mv^2}{2d}$$ The result is that the
      range is given by $$L = \frac{2E_bdf}{mv^2}$$
    <P>
      A second, independent, estimate is to ride a distance $D$ at a
      speed $v$, starting with a fully charged battery, and measure
      the time $\tau$ it takes to recharge the battery.  If the time
      to fully charge an empty battery is $T$ and the charging rate is
      more or less constant, then $$ \frac{\tau}{T} = \frac DL$$ so
      that $$ L = \frac{DT}{\tau}$$

      <H2>Test using a Dynamic Scooter Model B</H2>
    <P>
      The Dynamic Scooter Model B has a 180 W hr (648000 joule)
      battery and a mass of 10 kg.  It can run in several modes that
      set its top speed. Empirically, this speed seems to be 10 km/hr
      for the lowest setting and 15 km/hr for the next higher one.
    <P>
      For a rider with a mass of about 80 kg, the stopping distance $d$
      can be determined by riding at a speed set using cruise control,
      disabling cruise control at a known location, coasting to
      a stop, and measuring the distance between the point at which
      cruise control was disabled and the point where the scooter stopped.
      The measured value of $d$ is
      <UL>
	<LI> 7.7 meters at 10 km/hr
	<LI> 17 meters at 15 km/hr
      </UL>
      The value for $F$ turns out to be 45 newtons at 10 km/hr and
      46 newtons at 15 km/hr. Given the uncertainties in the location
      at which cruise control was disabled and the point where one
      has to step off the scooter, the two values of $F$ are consistent
      to within the likely measurement errors, indicating that $F$ is not
      strongly dependent on $v$.
    <P>
      At 15 km/hr for an 80 kg rider, the range, estimated based on
      stopping distance, is 11.3 km assuming the motor/electrical
      system efficiency $f$ is 0.8. This is consistent with an
      estimate of 10.3 to 12.9 km based on charging time (the
      specifications indicate a charging time of 4 to 5 hours for a
      fully discharged battery).
    <P>
      For a 59 kg rider, the measured stopping distance starting at 15
      km/hr was 21.6 meters, and the corresponding range is 18.7 km,
      which is very close to the specified maximum range of 20
      km. This is significantly higher than the 11.3 km range obtained
      for an 80 kg rider. There are at least two factors that could
      contribute to this difference:
      <UL>
	<LI> Due to the honeycomb tires used by a Dynamic Scooter
	  Model B to provided some shock absorption, tire deflection
	  due to the weight of the rider may result in significantly
	  more friction for heavier riders: more than one would expect
	  if friction was a constant multiplied by a normal force as
	  is the case for many materials.
	<LI> The test subject could have inadvertently disabled the
	  cruise control slightly too late. When asked, however, the
	  test subject indicated that the cruise control was disabled
	  at the exact location that was specified by pushing and
	  releasing the throttle quickly, and verified that with
	  cruise control engaged, the speed was 15 km/hr.
      </UL>
    <P>
      As a sanity check, the book Bicycling Science (Frank Rowland
      Whitt and David Gordon Wilson, Second Edition) contains a graph
      (Figure 7.2) that shows that for a typical bicycle, rolling
      resistance is nearly the same as air resistance at 15 km/hr.
      For a Dynamic Scooter Model B, if you spin the front wheel, it
      will stop in far less time than the back wheel, and far less
      time than a bicycle wheel.  As a result, assuming the drag force
      $F$ is independent of speed would seem to be a reasonable
      approximation for low speeds.
    <P>
      Finally, one should note that, for a heavier rider, the force
      needed to keep the scooter moving at a constant speed is higher
      than for a lighter rider, and consequently, the current flowing
      through the motor is higher as well, which will result in the
      motor running at a higher temperature.  The electrical resistance
      of a wire, however, increases with increasing temperature, so as
      a result, the efficiency of a motor will be lower when operated at
      a higher temperature.
    <P>
      While suggestive, these tests were done with only two riders. Ideally,
      one would like to use much larger number of riders so that an
      individual who does not do the test properly won't skew the
      measurements. It would also be useful to repeat these tests on a
      variety of road surfaces: there is likely to be more energy loss
      on a rougher surface than a smoother one, even when riding on what
      would normally be considered to be a well maintained street.

      <H2>Software</H2>
    <P>
      If one installs the software described on the web page
      <A HREF="http://bzdev.org/">http://bzdev.org</A>, and in
      particular the program scrunner which is provided with
      the libbzdev-java package, one can use the following
      script:
      <BLOCKQUOTE><PRE><CODE>
#!/usr/bin/scrunner -sUEP:true,D:m,D:v,D:d

// m is the rider's mass in kilograms
// v is the scooter's speed (km/hr)
// d is the stopping distance (meters) from
//   a speed v to 0 without using the brakes.
//
// The last three arguments are m, v, d
// in that order.

var eb ?= 180; // battery capacity (watt hours)
var ms ?= 10; // mass of the scooter (kg)
var f ?= 0.8; // motor efficiency (0.0 to 1.0)

// Adding arguments such as -vD:eb:250 before
// m, v, and d will change the defaults defined
// above.

m = m + ms;
eb = eb * 3600;
v = v * 25 / 90;

2*eb*d*f / (m * v*v);
      </CODE></PRE></BLOCKQUOTE>
    <P>
      The script is written in a scripting language named ESP
      (Expression Sequence Parser) that is essentially stripped-down
      ECMAScript (JavaScript), with some additional syntax.  If this
      script is installed in a file named <CODE>range</CODE> on
      systems (Linux, Unix, etc.) that recognize lines (in executable
      files) starting with "#!" as specifying an interpreter together
      with a script to run, then one can run commands such as
      <BLOCKQUOTE><PRE><CODE>
./range 80 15 17
      </CODE></PRE></BLOCKQUOTE>
      to print the range in meters for an 80 kg rider at 15 km/hr
      whose stopping distance without braking is 17 meters. Similarly
      to get the range if the battery capacity was doubled, one can
      run 
      <BLOCKQUOTE><PRE><CODE>
./range -vD:eb:360 80 15 17
      </CODE></PRE></BLOCKQUOTE>
      The first argument indicates that the variable eb is a
      double-precision number whose value is 360.  In the script, the
      statements with the "?=" operator declares a variable name and
      then sets it to a default value if the variable does not already
      have a value (e.g., by defining it on the command line).  The
      variables that can be overridden are
      <UL>
	<LI><CODE>eb</CODE>. The value is the energy capacity of the
	  battery in units of watt hours (if the specification for a
	  battery uses ampere hours, multiply that by the battery
	  voltage). The default is 180.  To change this from the
	  default, add the option <CODE>-vD:eb:</CODE><I>VALUE</I>,
	  where <I>VALUE</I> is the energy capacity in watt hours.
	<LI><CODE>ms</CODE>. The value is the mass of the scooter
	  without a rider in units of kilograms. The default is 10.
	  To change this from the default, add the option
	  <CODE>-vD:ms:</CODE><I>VALUE</I>, where <I>VALUE</I> is
	  the mass of the scooter in kilograms.
	<LI><CODE>f</CODE>. The efficiency of the motor. This should
	  be a number between 0 and 1.0. The default is 0.8. To change
	  this from the default, add the option
	  <CODE>-vD:eb:</CODE><I>VALUE</I>, where <I>VALUE</I> is
	  the efficiency.
      </UL>
      These options can appear in any order, but must precede the
      three mandatory numeric arguments.  For a Dynamic Scooter Model
      B, these options, except possibly for the one setting
      <CODE>f</CODE>, are not needed.
    <P>
      On systems that do not recognize lines starting with "#!" followed
      by the path name for a scripting language interpreter, use
      <BLOCKQUOTE><PRE><CODE>
scrunner -sUEPN:true,D:m,D:v,D:d range 80 15 17
      </CODE></PRE></BLOCKQUOTE>
      where <CODE>range</CODE> is the file name for the script. The
      manual page for scrunner contains a comprehensive description of
      this command.  In this case, command-line options must appear
      before the file name of the script. The argument starting with
      "<CODE>-s</CODE>" is somewhat cryptic and consists of
      comma-separated directives:
      <UL>
	<LI><CODE>UEP:true</CODE> is equivalent to
	  <CODE>U:true,E:true,P:true,N:true</CODE>. These
	  directives behave as follows:
	  <UL>
	    <LI><CODE>U:true</CODE> prevents a variable not needed in
	      the script from being defined.
	    <LI><CODE>E:true</CODE> indicates that scrunner should
	      exit immediately after the script is run (otherwise Java
	      will check for threads that may be running before
	      exiting).
	    <LI><CODE>P:true</CODE> indicates that the value of the
	      last expression in the script should be printed.
	    <LI><CODE>N:true</CODE> indicates that file names for
	      additional scripts cannot follow the mandatory
	      arguments.
	  </UL>
	<LI><CODE>D:m</CODE>, <CODE>D:v</CODE>, and <CODE>D:d</CODE>
	  indicate that variables names <CODE>m</CODE>, <CODE>v</CODE>
	  and <CODE>d</CODE> will be defined. and their values will be
	  those provided as mandatory arguments, which appear directly
	  after the file name of the script in the order in which
	  these directives are listed.  For systems that recognize
	  executable scripts that start with <CODE>#!</CODE>, the
	  script name is effectively inserted just after any options
	  appearing before the mandatory arguments.
      </UL>

  </BODY>
</HTML>

<!--  LocalWords:  rgb bodybg frac mv Fd bdf DL DT Whitt BLOCKQUOTE
 -->
<!--  LocalWords:  monospace scrunner libbzdev eb
 -->
